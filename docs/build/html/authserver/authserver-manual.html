<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Auth Server User Manual &mdash; UNICORE UFTP</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Changelog" href="CHANGES.html" />
    <link rel="prev" title="Building packages" href="README-building.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> UNICORE UFTP
            <img src="../_static/logo-unicore.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">UFTP Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../uftpd/uftpd-main.html">UFTPD server</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../uftpd/README-building.html">Building</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/README-building.html#updating-the-native-library">Updating the native library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/README-building.html#creating-distribution-packages">Creating distribution packages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../uftpd/README-building.html#tgz">tgz</a></li>
<li class="toctree-l4"><a class="reference internal" href="../uftpd/README-building.html#deb">deb</a></li>
<li class="toctree-l4"><a class="reference internal" href="../uftpd/README-building.html#rpm">rpm</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../uftpd/uftpd-manual.html">UFTPD User Manual</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/uftpd-manual.html#unicore-uftp">UNICORE UFTP</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../uftpd/uftpd-manual.html#uftp-features">UFTP features</a></li>
<li class="toctree-l4"><a class="reference internal" href="../uftpd/uftpd-manual.html#how-does-uftp-work">How does UFTP work</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/uftpd-manual.html#installation-and-use">Installation and use</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../uftpd/uftpd-manual.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../uftpd/uftpd-manual.html#c-library-for-switching-user-id">C library for switching user ID</a></li>
<li class="toctree-l4"><a class="reference internal" href="../uftpd/uftpd-manual.html#starting-and-stopping-the-uftpd-server">Starting and stopping the UFTPD server</a></li>
<li class="toctree-l4"><a class="reference internal" href="../uftpd/uftpd-manual.html#configuration-parameters">Configuration parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../uftpd/uftpd-manual.html#protecting-the-command-socket">Protecting the Command socket</a></li>
<li class="toctree-l4"><a class="reference internal" href="../uftpd/uftpd-manual.html#firewall-configuration">Firewall configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../uftpd/uftpd-manual.html#logging">Logging</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/uftpd-manual.html#unicore-integration">UNICORE Integration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../uftpd/uftpd-manual.html#configuring-the-uftp-service">Configuring the UFTP service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../uftpd/uftpd-manual.html#uftpd-servers-with-multiple-interfaces">UFTPD servers with multiple interfaces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../uftpd/uftpd-manual.html#enabling-data-encryption">Enabling data encryption</a></li>
<li class="toctree-l4"><a class="reference internal" href="../uftpd/uftpd-manual.html#limiting-bandwidth-per-transfer">Limiting bandwidth per transfer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../uftpd/uftpd-manual.html#disabling-ssl-on-the-command-port">Disabling SSL on the command port</a></li>
<li class="toctree-l4"><a class="reference internal" href="../uftpd/uftpd-manual.html#enabling-local-uftp-mode-on-the-unicore-x-server">Enabling “local” UFTP mode on the UNICORE/X server</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/uftpd-manual.html#testing-the-uftpd-server">Testing the UFTPD server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/uftpd-manual.html#performance-measurement-hints">Performance measurement hints</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../uftpd/CHANGES.html">Changelog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/CHANGES.html#uftp-2-12-0">UFTP 2.12.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/CHANGES.html#uftp-2-11-0">UFTP 2.11.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/CHANGES.html#uftp-2-9-2-released-nov-16-2020">UFTP 2.9.2 (released Nov 16 2020)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/CHANGES.html#uftp-2-9-1-released-oct-16-2020">UFTP 2.9.1 (released Oct 16 2020)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/CHANGES.html#uftp-2-9-0-released-sep-21-2020">UFTP 2.9.0 (released Sep 21 2020)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/CHANGES.html#uftp-2-8-0-released-jul-06-2020">UFTP 2.8.0 (released Jul 06 2020)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/CHANGES.html#uftp-2-7-1-released-nov-4-2019">UFTP 2.7.1 (released Nov 4 2019)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/CHANGES.html#uftp-2-7-0-released-sept-25-2019">UFTP 2.7.0 (released Sept 25 2019)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/CHANGES.html#uftp-2-6-2-released-aug-27-2019">UFTP 2.6.2 (released Aug 27 2019)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/CHANGES.html#uftp-2-6-1-released-sep-14-2018">UFTP 2.6.1 (released Sep 14 2018)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/CHANGES.html#uftp-2-6-0-released-jul-11-2018">UFTP 2.6.0 (released Jul 11 2018)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/CHANGES.html#uftp-2-5-2-released-jan-8-2018">UFTP 2.5.2 (released Jan 8 2018)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/CHANGES.html#uftp-2-5-1-released-nov-8-2017">UFTP 2.5.1 (released Nov 8 2017)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/CHANGES.html#uftp-2-5-0-released-june-12-2017">UFTP 2.5.0 (released June 12 2017)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/CHANGES.html#uftp-2-4-1-released-dec-7-2016">UFTP 2.4.1 (released Dec 7 2016)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/CHANGES.html#uftp-2-4-0-released-nov-23-2016">UFTP 2.4.0 (released Nov 23 2016)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/CHANGES.html#uftp-2-3-2-released-sep-15-2015">UFTP 2.3.2 (released Sep 15 2015)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/CHANGES.html#uftp-2-3-1-released-feb-11-2015">UFTP 2.3.1 (released Feb 11 2015)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/CHANGES.html#uftp-2-3-0-released-jan-26-2015">UFTP 2.3.0 (released Jan 26 2015)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/CHANGES.html#uftp-2-2-0-released-nov-3-2014">UFTP 2.2.0 (released Nov 3 2014)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/CHANGES.html#uftp-2-1-2-released-oct-2-2014">UFTP 2.1.2 (released Oct 2 2014)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/CHANGES.html#uftp-2-1-0-released-july-25-2014">UFTP 2.1.0 (released July 25 2014)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/CHANGES.html#uftp-2-0-0-released-10-dec-2013">UFTP 2.0.0 (released 10 Dec 2013)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/CHANGES.html#uftp-1-2-1-released-may-7-2012">UFTP 1.2.1 (released May 7 2012)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/CHANGES.html#uftp-1-2-0-released-15-dec-2011">UFTP 1.2.0 (released 15 Dec 2011)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/CHANGES.html#uftp-1-1-0-released-7-oct-2011">UFTP 1.1.0 (released 7 Oct 2011)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftpd/CHANGES.html#uftp-1-0-0-released-5-jul-2011">UFTP 1.0.0 (released 5 Jul 2011)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../pyuftpd/pyuftpd-main.html">PyUFTPD</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../pyuftpd/pyuftpd-manual.html">PyUFTPD User Manual</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../pyuftpd/pyuftpd-manual.html#unicore-uftp">UNICORE UFTP</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../pyuftpd/pyuftpd-manual.html#uftp-features">UFTP features</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pyuftpd/pyuftpd-manual.html#how-does-uftp-work">How does UFTP work</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../pyuftpd/pyuftpd-manual.html#installation-and-operation">Installation and operation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../pyuftpd/pyuftpd-manual.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pyuftpd/pyuftpd-manual.html#starting-and-stopping-the-uftpd-server">Starting and stopping the UFTPD server</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pyuftpd/pyuftpd-manual.html#configuration-parameters">Configuration parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pyuftpd/pyuftpd-manual.html#protecting-the-command-socket">Protecting the Command socket</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pyuftpd/pyuftpd-manual.html#firewall-configuration">Firewall configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pyuftpd/pyuftpd-manual.html#logging">Logging</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../pyuftpd/pyuftpd-manual.html#unicore-integration">UNICORE integration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyuftpd/pyuftpd-manual.html#testing-the-uftpd-server">Testing the UFTPD server</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../pyuftpd/CHANGES.html">Changelog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../pyuftpd/CHANGES.html#uftpd-3-1-2-released-dec-16-2021">UFTPD 3.1.2 (released Dec 16, 2021)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyuftpd/CHANGES.html#uftpd-3-1-1-released-dec-8-2021">UFTPD 3.1.1 (released Dec 8, 2021)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyuftpd/CHANGES.html#uftpd-3-1-0-released-oct-27-2021">UFTPD 3.1.0 (released Oct 27, 2021)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyuftpd/CHANGES.html#uftpd-3-0-4-released-sept-13-2021">UFTPD 3.0.4 (released Sept 13, 2021)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyuftpd/CHANGES.html#uftpd-3-0-3-released-july-2-2021">UFTPD 3.0.3 (released July 2, 2021)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyuftpd/CHANGES.html#uftpd-3-0-2-released-may-27-2021">UFTPD 3.0.2 (released May 27, 2021)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyuftpd/CHANGES.html#uftpd-3-0-1-released-may-10-2021">UFTPD 3.0.1 (released May 10, 2021)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pyuftpd/CHANGES.html#uftpd-3-0-0-released-apr-27-2021">UFTPD 3.0.0 (released Apr 27, 2021)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="authserver-main.html">Auth Server</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="README-UPGRADE.html">Update procedure</a></li>
<li class="toctree-l2"><a class="reference internal" href="README-building.html">Building packages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="README-building.html#creating-distribution-packages">Creating distribution packages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="README-building.html#tgz">tgz</a></li>
<li class="toctree-l4"><a class="reference internal" href="README-building.html#deb">deb</a></li>
<li class="toctree-l4"><a class="reference internal" href="README-building.html#rpm">rpm</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Auth Server User Manual</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installation">Installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="#basic-server-configuration-memory-etc">Basic server configuration (memory etc)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#starting-and-stopping-the-service">Starting and stopping the service</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#features">Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="#uftpd-server-s-configuration">UFTPD server(s) configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#round-robin-use-grouping-of-uftpd-servers">Round-robin use / grouping of UFTPD servers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#user-authentication">User authentication</a></li>
<li class="toctree-l4"><a class="reference internal" href="#attribute-sources">Attribute sources</a></li>
<li class="toctree-l4"><a class="reference internal" href="#attribute-mapping">Attribute mapping</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#checking-the-installation">Checking the installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installing-the-auth-server-in-an-existing-unicore-x-server">Installing the Auth server in an existing UNICORE/X server</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-auth-server-behind-a-unicore-gateway">Running the Auth server behind a UNICORE Gateway</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="CHANGES.html">Changelog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="CHANGES.html#auth-server-2-6-0-released-dec-15-2021">Auth Server 2.6.0 (released Dec 15, 2021)</a></li>
<li class="toctree-l3"><a class="reference internal" href="CHANGES.html#auth-server-2-5-0-p1-released-nov-3-2021">Auth Server 2.5.0-p1 (released Nov 3, 2021)</a></li>
<li class="toctree-l3"><a class="reference internal" href="CHANGES.html#auth-server-2-5-0-released-oct-27-2021">Auth Server 2.5.0 (released Oct 27, 2021)</a></li>
<li class="toctree-l3"><a class="reference internal" href="CHANGES.html#auth-server-2-4-0-released-mar-5-2021">Auth Server 2.4.0 (released Mar 5, 2021)</a></li>
<li class="toctree-l3"><a class="reference internal" href="CHANGES.html#auth-server-2-3-0-released-sep-21-2020">Auth Server 2.3.0 (released Sep 21, 2020)</a></li>
<li class="toctree-l3"><a class="reference internal" href="CHANGES.html#auth-server-2-2-1-released-jul-07-2020">Auth Server 2.2.1 (released Jul 07, 2020)</a></li>
<li class="toctree-l3"><a class="reference internal" href="CHANGES.html#auth-server-2-2-0-released-jun-17-2020">Auth Server 2.2.0 (released Jun 17, 2020)</a></li>
<li class="toctree-l3"><a class="reference internal" href="CHANGES.html#auth-server-2-1-0-released-feb-21-2020">Auth Server 2.1.0 (released Feb 21, 2020)</a></li>
<li class="toctree-l3"><a class="reference internal" href="CHANGES.html#auth-server-2-0-0-released-jan-20-2020">Auth Server 2.0.0 (released Jan 20, 2020)</a></li>
<li class="toctree-l3"><a class="reference internal" href="CHANGES.html#auth-server-1-5-0-released-aug-20-2019">Auth Server 1.5.0 (released Aug 20, 2019)</a></li>
<li class="toctree-l3"><a class="reference internal" href="CHANGES.html#auth-server-1-4-0-released-jul-11-2018">Auth Server 1.4.0 (released Jul 11, 2018)</a></li>
<li class="toctree-l3"><a class="reference internal" href="CHANGES.html#auth-server-1-3-0-released-nov-29-2016">Auth Server 1.3.0 (released Nov 29, 2016)</a></li>
<li class="toctree-l3"><a class="reference internal" href="CHANGES.html#auth-server-1-2-0-released-june-3-2016">Auth Server 1.2.0 (released June 3, 2016)</a></li>
<li class="toctree-l3"><a class="reference internal" href="CHANGES.html#auth-server-1-1-1-released-nov-18-2014">Auth Server 1.1.1 (released Nov 18, 2014)</a></li>
<li class="toctree-l3"><a class="reference internal" href="CHANGES.html#auth-server-1-1-0-released-nov-3-2014">Auth Server 1.1.0 (released Nov 3, 2014)</a></li>
<li class="toctree-l3"><a class="reference internal" href="CHANGES.html#auth-server-1-0-0-released-sept-19-2014">Auth Server 1.0.0 (released Sept 19, 2014)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../uftp-client/uftp-client-main.html">UFTP standalone client</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../uftp-client/uftp-client-manual.html">UFTP Client User Manual</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../uftp-client/uftp-client-manual.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftp-client/uftp-client-manual.html#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftp-client/uftp-client-manual.html#basic-usage">Basic Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftp-client/uftp-client-manual.html#authentication">Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftp-client/uftp-client-manual.html#usage">Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../uftp-client/uftp-client-manual.html#listing-a-directory-the-ls-command">Listing a directory: the <cite>ls</cite> command</a></li>
<li class="toctree-l4"><a class="reference internal" href="../uftp-client/uftp-client-manual.html#copying-data-the-cp-command">Copying data: the <cite>cp</cite> command</a></li>
<li class="toctree-l4"><a class="reference internal" href="../uftp-client/uftp-client-manual.html#computing-checksums-for-remote-files">Computing checksums for remote files</a></li>
<li class="toctree-l4"><a class="reference internal" href="../uftp-client/uftp-client-manual.html#synchronizing-a-file-the-sync-command">Synchronizing a file: the “sync” command</a></li>
<li class="toctree-l4"><a class="reference internal" href="../uftp-client/uftp-client-manual.html#data-sharing">Data sharing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../uftp-client/uftp-client-manual.html#using-a-proxy-server-experimental">Using a proxy server (<em>EXPERIMENTAL</em>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftp-client/uftp-client-manual.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftp-client/uftp-client-manual.html#getting-support">Getting support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../uftp-client/README-building.html">Building packages for the ‘uftp’ client</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../uftp-client/README-building.html#creating-distribution-packages">Creating distribution packages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../uftp-client/README-building.html#tgz">tgz</a></li>
<li class="toctree-l4"><a class="reference internal" href="../uftp-client/README-building.html#deb">deb</a></li>
<li class="toctree-l4"><a class="reference internal" href="../uftp-client/README-building.html#rpm-redhat">rpm redhat</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../uftp-client/CHANGES.html">Changelog</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../uftp-client/CHANGES.html#uftp-client-1-4-3-released-dec-15-2021">UFTP Client 1.4.3 (released Dec 15, 2021)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftp-client/CHANGES.html#uftp-client-1-4-2-released-aug-19-2021">UFTP Client 1.4.2 (released Aug 19, 2021)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftp-client/CHANGES.html#uftp-client-1-4-1-released-apr-8-2021">UFTP Client 1.4.1 (released Apr 8, 2021)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftp-client/CHANGES.html#uftp-client-1-4-0-released-mar-5-2021">UFTP Client 1.4.0 (released Mar 5, 2021)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftp-client/CHANGES.html#uftp-client-1-3-2-released-sep-18-2020">UFTP Client 1.3.2 (released Sep 18, 2020)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftp-client/CHANGES.html#uftp-client-1-3-1-released-jul-21-2020">UFTP Client 1.3.1 (released Jul 21, 2020)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftp-client/CHANGES.html#uftp-client-1-2-0-released-apr-16-2020">UFTP Client 1.2.0 (released Apr 16, 2020)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftp-client/CHANGES.html#uftp-client-1-1-0-released-feb-13-2020">UFTP Client 1.1.0 (released Feb 13, 2020)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftp-client/CHANGES.html#uftp-client-1-0-0-released-sep-30-2019">UFTP Client 1.0.0 (released Sep 30, 2019)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftp-client/CHANGES.html#uftp-client-0-9-1-released-aug-27-2019">UFTP Client 0.9.1 (released Aug 27, 2019)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftp-client/CHANGES.html#uftp-client-0-9-0-released-may-28-2019">UFTP Client 0.9.0 (released May 28, 2019)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftp-client/CHANGES.html#uftp-client-0-8-0-released-feb-4-2019">UFTP Client 0.8.0 (released Feb 4, 2019)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftp-client/CHANGES.html#uftp-client-0-7-0-released-jul-19-2017">UFTP Client 0.7.0 (released  Jul 19, 2017)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftp-client/CHANGES.html#uftp-client-0-6-0-released-nov-25-2016">UFTP Client 0.6.0 (released  Nov 25, 2016)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftp-client/CHANGES.html#uftp-client-0-5-0-released-june-14-2016">UFTP Client 0.5.0 (released June 14, 2016)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftp-client/CHANGES.html#uftp-client-0-4-0-released-jan-26-2015">UFTP Client 0.4.0 (released Jan 26, 2015)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftp-client/CHANGES.html#uftp-client-0-3-0-released-nov-6-2014">UFTP Client 0.3.0 (released Nov 6, 2014)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftp-client/CHANGES.html#uftp-client-0-2-0-released-oct-2-2014">UFTP Client 0.2.0 (released Oct 2, 2014)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uftp-client/CHANGES.html#uftp-client-0-1-0-released-sept-19-2014">UFTP Client 0.1.0 (released Sept 19, 2014)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../datashare/datashare-main.html">Datashare</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">UNICORE UFTP</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="authserver-main.html">Auth Server</a> &raquo;</li>
      <li>Auth Server User Manual</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/authserver/authserver-manual.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="auth-server-user-manual">
<span id="authserver-manual"></span><h1>Auth Server User Manual<a class="headerlink" href="#auth-server-user-manual" title="Permalink to this headline"></a></h1>
<p>UNICORE Team &lt;<a class="reference external" href="mailto:unicore-support&#37;&#52;&#48;lists&#46;sourceforge&#46;net">unicore-support<span>&#64;</span>lists<span>&#46;</span>sourceforge<span>&#46;</span>net</a>&gt;</p>
<p>The UFTP authentication service (“Auth server”) is RESTful
service for authenticating users and initiating UFTP transfers. It
is indended to be used with a standalone UFTP client and provides
access to one or more UFTPD servers.</p>
<p>Besides data transfer via UFTP and data management features like ‘ls’,
the Auth server also provides REST services for data sharing and
accessing shared data sets.</p>
<p>The Auth server is based on the UNICORE Services Environment, and all
usual UNICORE features and security configuration options are
available as well. For example, the Auth server can be deployed behind
a UNICORE Gateway, or it can be configured to use Unity for
authenticating users.</p>
<p>This manual focuses on the configuration items specific to the Auth
server. If you need more in-depth information on general configuration
issues, please refer to the UNICORE/X manual, available via unicore.eu</p>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline"></a></h2>
<section id="prerequisites">
<h3>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline"></a></h3>
<p>The Auth server should be run as a non-root user (e.g. ‘unicore’).</p>
<p>It requires</p>
<blockquote>
<div><ul class="simple">
<li><p>Java 1.8</p></li>
<li><p>an installed UFTPD server (2.6.0 or later)</p></li>
</ul>
</div></blockquote>
<p>The Auth server needs an X.509 certificate and truststore
for communicating with UFTPD.</p>
<p>Users must be able to access the Auth server’s https port. It is
possible to deploy the Auth server behind a UNICORE Gateway.</p>
<p>The UFTP Auth service comes with all required scripts and config files
to be run standalone. To install, unzip the downloaded package into a
directory of your choice.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can run the service in an existing UNICORE/X server (8.0.0 or later). Please see <a class="reference internal" href="#running-the-auth-server-behind-a-unicore-gateway">Running the Auth server behind a UNICORE Gateway</a> below for details.</p>
</div>
</section>
<section id="basic-server-configuration-memory-etc">
<h3>Basic server configuration (memory etc)<a class="headerlink" href="#basic-server-configuration-memory-etc" title="Permalink to this headline"></a></h3>
<p>The <cite>startup.properties</cite> configuration file contains basic settings
such as the Java command, JVM memory etc. Please review it.</p>
<p>The Auth server host and port are configured in the <cite>container.properties</cite>
configuration file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">container</span><span class="o">.</span><span class="n">host</span><span class="o">=</span><span class="n">uftp</span><span class="o">.</span><span class="n">yoursite</span><span class="o">.</span><span class="n">com</span>
<span class="n">container</span><span class="o">.</span><span class="n">port</span><span class="o">=</span><span class="mi">9000</span>

<span class="c1"># if running behind a UNICORE Gateway or a NAT router,</span>
<span class="c1"># set the baseurl</span>
<span class="n">container</span><span class="o">.</span><span class="n">sitename</span><span class="o">=</span><span class="n">AUTH</span>
<span class="n">container</span><span class="o">.</span><span class="n">baseurl</span><span class="o">=</span><span class="n">gateway</span><span class="o">.</span><span class="n">yoursite</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="mi">2222</span><span class="o">/</span><span class="n">AUTH</span><span class="o">/</span><span class="n">services</span>
</pre></div>
</div>
<p>Also in the <cite>container.properties</cite> configuration file, the server’s X.509
private key and the truststore settings need to be configured.</p>
</section>
<section id="starting-and-stopping-the-service">
<h3>Starting and stopping the service<a class="headerlink" href="#starting-and-stopping-the-service" title="Permalink to this headline"></a></h3>
<p>Use the shell scripts in the <cite>bin</cite> folder to start or stop the
service.</p>
</section>
</section>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline"></a></h2>
<p>The following items need to be configured in the Auth
server’s <cite>container.properties</cite> file:</p>
<blockquote>
<div><ul class="simple">
<li><p>UFTPD server(s) to be accessed</p></li>
<li><p>User authentication: configure the Auth server to authenticate
users using username/password, ssh key or via Unity</p></li>
<li><p>Attribute sources (XUUDB, map file, …) for assigning
local attributes like UNIX user name to authenticated
users.</p></li>
</ul>
</div></blockquote>
<section id="features">
<h3>Features<a class="headerlink" href="#features" title="Permalink to this headline"></a></h3>
<p>This service provides two features</p>
<blockquote>
<div><ul class="simple">
<li><p>AuthServer</p></li>
<li><p>DataSharing</p></li>
</ul>
</div></blockquote>
<p>both are enabled by default. To disable data sharing, set</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">container</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">DataSharing</span><span class="o">.</span><span class="n">enable</span><span class="o">=</span><span class="n">false</span>
</pre></div>
</div>
<p>There are no further configuration options for these features.</p>
</section>
<section id="uftpd-server-s-configuration">
<h3>UFTPD server(s) configuration<a class="headerlink" href="#uftpd-server-s-configuration" title="Permalink to this headline"></a></h3>
<p>For each UFTPD server that should be accessed, you’ll need
to configure the relevant properties in the Auth service’s config file</p>
<p>The <cite>authservice.servers</cite> property is a list of server names. These
should be meaningful, since users will need to use them, too.  The
other properties are used to configure the UFTPD command address and
the UFTPD listen address. Please refer to the UFTPD configuration and
manual for details.</p>
<blockquote>
<div><ul class="simple">
<li><p><cite>host</cite> the IP address of the UFTPD ‘listen’ socket</p></li>
<li><p><cite>port</cite> the port of the UFTPD ‘listen’ socket</p></li>
<li><p><cite>commandHost</cite> the IP address of the UFTPD ‘command’ socket</p></li>
<li><p><cite>commandPort</cite>: the port of the UFTPD ‘command’ socket</p></li>
<li><p><cite>ssl</cite>: whether SSL is used to connect to the command socket. This MUST be set to its default of ‘true’ in a production environment!</p></li>
<li><p><cite>description</cite>: human-readable description of the UFTPD server</p></li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The listen socket address will be communicated to clients, who will
attempt to connect to that address. Therefore, this has         to be a public
interface. For example, if you are running UFTPD behind a       NAT router,
you have to use the IP configured as the ADVERTISE_HOST         in the UFTPD configuration.</p>
</div>
<p>For example, we want to configure two UFTPD servers named “CLUSTER”
and “TEST”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># configured UFTPD server(s)</span>
<span class="n">authservice</span><span class="o">.</span><span class="n">servers</span><span class="o">=</span><span class="n">CLUSTER</span> <span class="n">TEST</span>

<span class="c1"># configuration for &#39;CLUSTER&#39; server</span>
<span class="n">authservice</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">CLUSTER</span><span class="o">.</span><span class="n">host</span><span class="o">=</span><span class="n">cluster</span><span class="o">.</span><span class="n">your</span><span class="o">.</span><span class="n">org</span>
<span class="n">authservice</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">CLUSTER</span><span class="o">.</span><span class="n">port</span><span class="o">=</span><span class="mi">64433</span>
<span class="n">authservice</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">CLUSTER</span><span class="o">.</span><span class="n">commandHost</span><span class="o">=</span><span class="n">cluster</span><span class="o">-</span> <span class="n">internal</span><span class="o">.</span><span class="n">your</span><span class="o">.</span><span class="n">org</span>
<span class="n">authservice</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">CLUSTER</span><span class="o">.</span><span class="n">commandPort</span><span class="o">=</span><span class="mi">64434</span>
<span class="n">authservice</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">CLUSTER</span><span class="o">.</span><span class="n">ssl</span><span class="o">=</span><span class="n">true</span>
<span class="n">authservice</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">CLUSTER</span><span class="o">.</span><span class="n">description</span><span class="o">=</span><span class="n">Production</span> <span class="n">UFTPD</span>
<span class="n">server</span> <span class="n">on</span> <span class="n">CLUSTER</span>

<span class="c1"># configuration for &#39;TEST&#39; server</span>
<span class="n">authservice</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">TEST</span><span class="o">.</span><span class="n">host</span><span class="o">=</span><span class="n">localhost</span>
<span class="n">authservice</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">TEST</span><span class="o">.</span><span class="n">port</span><span class="o">=</span><span class="mi">64433</span>
<span class="n">authservice</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">TEST</span><span class="o">.</span><span class="n">commandHost</span><span class="o">=</span><span class="n">localhost</span>
<span class="n">authservice</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">TEST</span><span class="o">.</span><span class="n">commandPort</span><span class="o">=</span><span class="mi">64434</span>
<span class="n">authservice</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">TEST</span><span class="o">.</span><span class="n">ssl</span><span class="o">=</span><span class="n">false</span>
<span class="n">authservice</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">TEST</span><span class="o">.</span><span class="n">description</span><span class="o">=</span><span class="n">Test</span> <span class="n">UFTPD</span> <span class="n">server</span>
</pre></div>
</div>
<p>To allow the Auth server access to the command port of UFTPD, you
need to add an entry to UFTPD’s ACL file. This is explained in the
UFTPD manual.</p>
</section>
<section id="round-robin-use-grouping-of-uftpd-servers">
<h3>Round-robin use / grouping of UFTPD servers<a class="headerlink" href="#round-robin-use-grouping-of-uftpd-servers" title="Permalink to this headline"></a></h3>
<p>You can configure multiple UFTPD servers to form a “logical”
UFTPD server.  The idea is that multiple UFTPD servers are used in a
round robin fashion to provide better performance.</p>
<p>Also, this mode of operation will provide fail-over if one of the
UFTPD servers is down for maintenance or upgrades (or because of some
error).</p>
<p>In this case the configuration for the logical server has multiple
blocks numbered “1”, “2”, …</p>
<p>Each block configures one physical server.</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># configuration for multiple UFTPD instances</span>
<span class="c1"># providing the logical &#39;CLUSTER&#39; server</span>

<span class="n">authservice</span><span class="o">.</span><span class="n">servers</span><span class="o">=</span><span class="n">CLUSTER</span>

<span class="n">authservice</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">CLUSTER</span><span class="o">.</span><span class="n">description</span><span class="o">=</span><span class="n">Production</span> <span class="n">UFTPD</span> <span class="n">server</span> <span class="n">on</span> <span class="n">CLUSTER</span>

<span class="n">authservice</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">CLUSTER</span><span class="mf">.1</span><span class="o">.</span><span class="n">host</span><span class="o">=</span><span class="n">cluster1</span><span class="o">.</span><span class="n">your</span><span class="o">.</span><span class="n">org</span>
<span class="n">authservice</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">CLUSTER</span><span class="mf">.1</span><span class="o">.</span><span class="n">port</span><span class="o">=</span><span class="mi">64433</span>
<span class="n">authservice</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">CLUSTER</span><span class="mf">.1</span><span class="o">.</span><span class="n">commandHost</span><span class="o">=</span><span class="n">cluster</span><span class="o">-</span>       <span class="n">internal</span><span class="o">-</span><span class="mf">1.</span><span class="n">your</span><span class="o">.</span><span class="n">org</span>
<span class="n">authservice</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">CLUSTER</span><span class="mf">.1</span><span class="o">.</span><span class="n">commandPort</span><span class="o">=</span><span class="mi">64434</span>
<span class="n">authservice</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">CLUSTER</span><span class="mf">.1</span><span class="o">.</span><span class="n">ssl</span><span class="o">=</span><span class="n">true</span>


<span class="n">authservice</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">CLUSTER</span><span class="mf">.2</span><span class="o">.</span><span class="n">host</span><span class="o">=</span><span class="n">cluster2</span><span class="o">.</span><span class="n">your</span><span class="o">.</span><span class="n">org</span>
<span class="n">authservice</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">CLUSTER</span><span class="mf">.2</span><span class="o">.</span><span class="n">port</span><span class="o">=</span><span class="mi">64433</span>
<span class="n">authservice</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">CLUSTER</span><span class="mf">.2</span><span class="o">.</span><span class="n">commandHost</span><span class="o">=</span><span class="n">cluster</span><span class="o">-</span>       <span class="n">internal</span><span class="o">-</span><span class="mf">2.</span><span class="n">your</span><span class="o">.</span><span class="n">org</span>
<span class="n">authservice</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">CLUSTER</span><span class="mf">.2</span><span class="o">.</span><span class="n">commandPort</span><span class="o">=</span><span class="mi">64434</span>
<span class="n">authservice</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">CLUSTER</span><span class="mf">.2</span><span class="o">.</span><span class="n">ssl</span><span class="o">=</span><span class="n">true</span>
</pre></div>
</div>
</section>
<section id="user-authentication">
<h3>User authentication<a class="headerlink" href="#user-authentication" title="Permalink to this headline"></a></h3>
<p>The Auth service is a RESTful UNICORE service, and as such all the
configuration details for a UNICORE/X server apply here as well.</p>
<p>We summarise the most important details, please refer to the UNICORE/X
manual if you want to learn about further options.</p>
<p>The enabled authentication options and their order are configured
in <cite>container.properties</cite>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">container</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">order</span><span class="o">=</span><span class="n">PASSWORD</span> <span class="o">|</span> <span class="n">SSHKEY</span> <span class="o">|</span> <span class="n">UNITY</span>
</pre></div>
</div>
<p>The available options can be combined.</p>
<section id="username-password-file">
<h4>Username-password file<a class="headerlink" href="#username-password-file" title="Permalink to this headline"></a></h4>
<p>To use a file containing username, password and the DN,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">container</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">order</span><span class="o">=</span><span class="n">PASSWORD</span>
<span class="n">container</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">PASSWORD</span><span class="o">.</span><span class="n">class</span><span class="o">=</span><span class="n">eu</span><span class="o">.</span><span class="n">unicore</span><span class="o">.</span><span class="n">services</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">FilebasedAuthenticator</span>
<span class="n">container</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">PASSWORD</span><span class="o">.</span><span class="n">file</span><span class="o">=</span><span class="n">conf</span><span class="o">/</span><span class="n">rest</span><span class="o">-</span><span class="n">users</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>This configures to use the file <cite>conf/rest-users.txt</cite>. The file format is</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#</span>
<span class="c1"># on each line:</span>
<span class="c1"># username:hash:salt:DN</span>
<span class="c1">#</span>
<span class="n">demouser</span><span class="p">:</span><span class="o">&lt;...&gt;</span><span class="p">:</span><span class="o">&lt;...&gt;</span><span class="p">:</span><span class="n">CN</span><span class="o">=</span><span class="n">Demo</span> <span class="n">User</span><span class="p">,</span> <span class="n">O</span><span class="o">=</span><span class="n">UNICORE</span><span class="p">,</span> <span class="n">C</span><span class="o">=</span><span class="n">EU</span>
</pre></div>
</div>
<p>i.e. each line gives the username, the hashed password, the salt and
the user’s DN, separated by colons. To generate entries, i.e. to hash the
password correctly, the ‘md5sum’ utility can be used. For example,
if your intended password is ‘test123’, you could do</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$&gt; <span class="nv">SALT</span><span class="o">=</span><span class="k">$(</span>tr -dc <span class="s2">&quot;A-Za-z0-9_&quot;</span> &lt; /dev/urandom <span class="p">|</span> head -c <span class="m">16</span> <span class="p">|</span> xargs<span class="k">)</span>
$&gt; /bin/echo <span class="s2">&quot;Salt is </span><span class="si">${</span><span class="nv">SALT</span><span class="si">}</span><span class="s2">&quot;</span>
$&gt; /bin/echo -n <span class="s2">&quot;</span><span class="si">${</span><span class="nv">SALT</span><span class="si">}</span><span class="s2">test123&quot;</span> <span class="p">|</span> md5sum
</pre></div>
</div>
<p>which will output the salted and hashed password. Here we generate a
random string as the salt. Enter these together with the username, and
the DN of the user into the password file.</p>
</section>
<section id="unity-saml-authentication">
<h4>Unity SAML authentication<a class="headerlink" href="#unity-saml-authentication" title="Permalink to this headline"></a></h4>
<p>You can also hook up with Unity, passing on the username/password and
retrieving an authentication assertion.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">container</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">order</span><span class="o">=</span><span class="n">UNITY</span>

<span class="n">container</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">UNITY</span><span class="o">.</span><span class="n">class</span><span class="o">=</span><span class="n">eu</span><span class="o">.</span><span class="n">unicore</span><span class="o">.</span><span class="n">services</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">UnitySAMLAuthenticator</span>
<span class="n">container</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">UNITY</span><span class="o">.</span><span class="n">address</span><span class="o">=</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">2443</span><span class="o">/</span><span class="n">unicore</span><span class="o">-</span><span class="n">soapidp</span><span class="o">/</span><span class="n">saml2unicoreidp</span><span class="o">-</span><span class="n">soap</span><span class="o">/</span><span class="n">AuthenticationService</span>
<span class="n">container</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">UNITY</span><span class="o">.</span><span class="n">validate</span><span class="o">=</span><span class="n">true</span>
</pre></div>
</div>
</section>
<section id="unity-oauth-bearer-token-authentication">
<h4>Unity OAuth bearer token authentication<a class="headerlink" href="#unity-oauth-bearer-token-authentication" title="Permalink to this headline"></a></h4>
<p>To have Unity check the client’s OAuth token:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">container</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">order</span><span class="o">=</span><span class="n">UNITY</span><span class="o">-</span><span class="n">OAUTH</span>
<span class="n">container</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">UNITY</span><span class="o">-</span><span class="n">OAUTH</span><span class="o">.</span><span class="n">class</span><span class="o">=</span><span class="n">eu</span><span class="o">.</span><span class="n">unicore</span><span class="o">.</span><span class="n">services</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">UnityOAuthAuthenticator</span>
<span class="n">container</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">UNITY</span><span class="o">-</span><span class="n">OAUTH</span><span class="o">.</span><span class="n">address</span><span class="o">=</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">2443</span><span class="o">/</span><span class="n">unicore</span><span class="o">-</span><span class="n">soapidp</span><span class="o">.</span><span class="n">oidc</span><span class="o">/</span><span class="n">saml2unicoreidp</span><span class="o">-</span><span class="n">soap</span><span class="o">/</span><span class="n">AuthenticationService</span>
<span class="n">container</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">UNITY</span><span class="o">-</span><span class="n">OAUTH</span><span class="o">.</span><span class="n">validate</span><span class="o">=</span><span class="n">true</span>
</pre></div>
</div>
</section>
<section id="ssh-key-validation">
<h4>SSH Key validation<a class="headerlink" href="#ssh-key-validation" title="Permalink to this headline"></a></h4>
<p>This authentication option is based on the validation of a token using
the user’s public SSH key. The token will be checked, and if
successful, the user will be assigned a distinguished name for later
authorisation.</p>
<p>SSH keys are read from the user’s <cite>~/.ssh/authorized_keys</cite> file, but
can also be managed manually in a dedicated ssh keys file.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>SSH key validation will not work for users on Windows, since the UFTP
stand-alone client does not yet support SSH keys on Windows.
We recommand adding a username/password option for Windows users.</p>
</div>
<p>SSH key validation is configured as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># authN</span>
<span class="n">container</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">order</span><span class="o">=</span><span class="n">SSHKEY</span>

<span class="n">container</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">SSHKEY</span><span class="o">.</span><span class="n">class</span><span class="o">=</span><span class="n">eu</span><span class="o">.</span><span class="n">unicore</span><span class="o">.</span><span class="n">uftp</span><span class="o">.</span><span class="n">authserver</span><span class="o">.</span><span class="n">authenticate</span><span class="o">.</span><span class="n">SSHKeyAuthenticator</span>
</pre></div>
</div>
<p>When used like this, the users get an automatically assigned DN. By
default, the DN is <cite>CN=&lt;username&gt;, OU=ssh-local-users</cite>. Using the “PAM
attribute source” (see below), authenticated users can be assigned the
“user” role automatically without further configuration.</p>
<p>The user DN can be modified by configuring the DN template like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#DN template used for SSH key mapping. The %s is replaced by the username</span>
<span class="n">container</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">SSHKEY</span><span class="o">.</span><span class="n">dnTemplate</span><span class="o">=</span><span class="n">CN</span><span class="o">=%</span><span class="n">s</span><span class="p">,</span> <span class="n">OU</span><span class="o">=</span><span class="n">ssh</span><span class="o">-</span><span class="n">local</span><span class="o">-</span><span class="n">users</span>
</pre></div>
</div>
<section id="manual-ssh-key-mapping">
<h5>Manual SSH key mapping<a class="headerlink" href="#manual-ssh-key-mapping" title="Permalink to this headline"></a></h5>
<p>If you want to map ssh keys to DNs manually, a file is used. Entries in the file
override the keys read from <cite>~/.ssh/authorized_keys</cite>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># configure SSH keys file</span>
<span class="n">container</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">authentication</span><span class="o">.</span><span class="n">SSHKEY</span><span class="o">.</span><span class="n">file</span><span class="o">=</span><span class="n">conf</span><span class="o">/</span><span class="n">ssh</span><span class="o">-</span><span class="n">users</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>It contains the mappings and the ssh public keys in a simple format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example SSH users file used with the SSHKEY authentication method</span>

<span class="c1">#</span>
<span class="c1">#format: username:sshkey:DN</span>
<span class="c1">#</span>
<span class="n">demouser</span><span class="p">:</span><span class="n">ssh</span><span class="o">-</span><span class="n">rsa</span> <span class="n">keydata_was_omitted</span> <span class="n">testkey</span><span class="p">:</span><span class="n">CN</span><span class="o">=</span><span class="n">Demo</span> <span class="n">User</span><span class="p">,</span> <span class="n">O</span><span class="o">=</span><span class="n">UNICORE</span><span class="p">,</span> <span class="n">C</span><span class="o">=</span><span class="n">EU</span>
</pre></div>
</div>
<p>The SSH key is in the same one-line format used in the <cite>.ssh/authorized_keys</cite> file.</p>
<p>You can enter multiple lines per username, to accommodate the case that a user has different
SSH keys available. For example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example SSH users file with multiple keys per user</span>

<span class="n">demouser</span><span class="p">:</span><span class="n">ssh</span><span class="o">-</span><span class="n">rsa</span> <span class="o">&lt;...</span><span class="n">omitted</span> <span class="n">keydata</span><span class="o">...&gt;</span><span class="p">:</span><span class="n">CN</span><span class="o">=</span><span class="n">Demo</span> <span class="n">User</span><span class="p">,</span> <span class="n">O</span><span class="o">=</span><span class="n">UNICORE</span><span class="p">,</span> <span class="n">C</span><span class="o">=</span><span class="n">EU</span>
<span class="n">demouser</span><span class="p">:</span><span class="n">ssh</span><span class="o">-</span><span class="n">dss</span> <span class="o">&lt;...</span><span class="n">omitted</span> <span class="n">keydata</span><span class="o">...&gt;</span><span class="p">:</span><span class="n">CN</span><span class="o">=</span><span class="n">Demo</span> <span class="n">User</span><span class="p">,</span> <span class="n">O</span><span class="o">=</span><span class="n">UNICORE</span><span class="p">,</span> <span class="n">C</span><span class="o">=</span><span class="n">EU</span>
<span class="n">otheruser</span><span class="p">:</span><span class="n">ssh</span><span class="o">-</span><span class="n">rsa</span> <span class="o">&lt;...</span><span class="n">omitted</span> <span class="n">keydata</span><span class="o">...&gt;</span><span class="p">:</span><span class="n">CN</span><span class="o">=</span><span class="n">Other</span> <span class="n">User</span><span class="p">,</span> <span class="n">O</span><span class="o">=</span><span class="n">UNICORE</span><span class="p">,</span> <span class="n">C</span><span class="o">=</span><span class="n">DE</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="attribute-sources">
<h3>Attribute sources<a class="headerlink" href="#attribute-sources" title="Permalink to this headline"></a></h3>
<p>Please refer to the UNICORE/X manual on how to set up and configure
attribute sources like map file or XUUDB.</p>
<p>To use the automatic SSH key mapping, please use this config snippet</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># attribute source(s)</span>
<span class="n">container</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">order</span><span class="o">=</span><span class="n">PAM</span>
<span class="n">container</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">combiningPolicy</span><span class="o">=</span><span class="n">MERGE_LAST_OVERRIDES</span>

<span class="n">container</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">attributes</span><span class="o">.</span><span class="n">PAM</span><span class="o">.</span><span class="n">class</span><span class="o">=</span><span class="n">eu</span><span class="o">.</span><span class="n">unicore</span><span class="o">.</span><span class="n">services</span><span class="o">.</span><span class="n">rest</span><span class="o">.</span><span class="n">security</span><span class="o">.</span><span class="n">PAMAttributeSource</span>
</pre></div>
</div>
<p>In this way users that successfully authenticate with their SSH key get the “user”
role automatically.</p>
</section>
<section id="attribute-mapping">
<h3>Attribute mapping<a class="headerlink" href="#attribute-mapping" title="Permalink to this headline"></a></h3>
<p>After successful authentication, the user is assigned attributes
such as the Unix account and group which is used for file access.</p>
<p>The Unix account and group are taken from the configured attribute
sources (e.g. XUUDB). Since it is possible to access multiple UFTPD
servers using a single Auth server, it may be required to configure
different attributes for different UFTPD servers. This is easily
possible using the file attribute source (map file).</p>
<p>It is also possible to control which directories and files a user
can access. This is done by configuring the allowed and/or the
forbidden file path patterns.</p>
<p>The following map file entry gives a full example.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;CN=Demo User,O=UNICORE,C=EU&quot;</span><span class="nt">&gt;</span>
   <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;role&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;value&gt;</span>user<span class="nt">&lt;/value&gt;</span>
   <span class="nt">&lt;/attribute&gt;</span>

   <span class="cm">&lt;!-- default Unix account and group --&gt;</span>
   <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;xlogin&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;value&gt;</span>somebody<span class="nt">&lt;/value&gt;</span>
   <span class="nt">&lt;/attribute&gt;</span>
   <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;group&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;value&gt;</span>users<span class="nt">&lt;/value&gt;</span>
   <span class="nt">&lt;/attribute&gt;</span>

    <span class="cm">&lt;!-- UFTP specific attributes --&gt;</span>

    <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;uftpd.CLUSTER.xlogin&quot;</span><span class="nt">&gt;</span>
       <span class="nt">&lt;value&gt;</span>user1<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/attribute&gt;</span>
    <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;uftpd.CLUSTER.group&quot;</span><span class="nt">&gt;</span>
       <span class="nt">&lt;value&gt;</span>hpc<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/attribute&gt;</span>

    <span class="cm">&lt;!-- optional rate limit (bytes per second) --&gt;</span>
    <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;uftpd.CLUSTER.rateLimit&quot;</span><span class="nt">&gt;</span>
       <span class="nt">&lt;value&gt;</span>10M<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/attribute&gt;</span>

    <span class="cm">&lt;!-- optional includes --&gt;</span>
    <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;uftpd.CLUSTER.includes&quot;</span><span class="nt">&gt;</span>
       <span class="nt">&lt;value&gt;</span>/tmp/*:/work/*<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/attribute&gt;</span>
    <span class="cm">&lt;!-- optional excludes --&gt;</span>
    <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;uftpd.CLUSTER.excludes&quot;</span><span class="nt">&gt;</span>
       <span class="nt">&lt;value&gt;</span>/home/*:/etc/*<span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/attribute&gt;</span>

 <span class="nt">&lt;/entry&gt;</span>
</pre></div>
</div>
<p>Here, the “CLUSTER” must match a configured UFTPD server, see also <a class="reference internal" href="#uftpd-server-s-configuration">UFTPD server(s) configuration</a>. Available attributes are</p>
<blockquote>
<div><ul class="simple">
<li><p>role: the UNICORE role, usually this will be ‘user’</p></li>
<li><p>xlogin, group: Unix account and group to be used for this user</p></li>
<li><p>rateLimit: the number of bytes per second (per transfer) can be
limited. You can use the units “K”, “M”, and “G” for kilo, mega or
gigabytes, respectively.</p></li>
<li><p>includes: file path patterns (separated by “:”) that are allowed.
If not given, all the user’s files can be accessed.</p></li>
<li><p>excludes: file path patterns (separated by “:”) that are forbidden.
If not given, no files are explicitely excluded.</p></li>
</ul>
</div></blockquote>
</section>
</section>
<section id="checking-the-installation">
<h2>Checking the installation<a class="headerlink" href="#checking-the-installation" title="Permalink to this headline"></a></h2>
<p>You can check that the server works using a simple HTTP client such
as <cite>curl</cite> to access the Auth server’s base URL, provided you
have configured username/password authentication.</p>
<p>The command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$&gt; curl -k https://&lt;host:port&gt;/rest/auth <span class="se">\</span>
        -H <span class="s2">&quot;Accept: application/json&quot;</span> <span class="se">\</span>
        -u username:password
</pre></div>
</div>
<p>should produce a JSON document containing information about the
configured UFTPD servers and their status, such as</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;TEST&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;availableGroups&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;somebody&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;audio&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s2">&quot;users&quot;</span><span class="w"></span>
<span class="w">  </span><span class="p">],</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Default UFTPD server for testing&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;gid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;users&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;href&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://localhost:9000/rest/auth/TEST&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;rateLimit&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">209715200</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;OK [connected to UFTPD localhost:64435]&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;somebody&quot;</span><span class="p">,</span><span class="w"></span>
<span class="p">}}</span><span class="w"></span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you do not get any output, try adding the “-i” option to the curl
command, most probably the username/password is incorrect.</p>
</div>
</section>
<section id="installing-the-auth-server-in-an-existing-unicore-x-server">
<h2>Installing the Auth server in an existing UNICORE/X server<a class="headerlink" href="#installing-the-auth-server-in-an-existing-unicore-x-server" title="Permalink to this headline"></a></h2>
<p>This option is interesting if you are already running a UNICORE
installation and want to allow your users the option of using the
standalone UFTP client. This requires UNICORE/X version 8.0 or later!</p>
<blockquote>
<div><ul class="simple">
<li><p>copy the <cite>authserver-*.jar</cite> file to the ‘lib’ directory of UNICORE/X</p></li>
<li><p>copy the XACML policy file <cite>30uftpAuthService.xml</cite> to the
‘conf/xacml2Policies’ directory</p></li>
<li><p>edit <cite>container.properties</cite> (or <cite>uas.config</cite>) and setup UFTPD details
and, if necessary, RESTful user authentication as described above</p></li>
</ul>
</div></blockquote>
</section>
<section id="running-the-auth-server-behind-a-unicore-gateway">
<h2>Running the Auth server behind a UNICORE Gateway<a class="headerlink" href="#running-the-auth-server-behind-a-unicore-gateway" title="Permalink to this headline"></a></h2>
<p>If you want to place the Auth server behind a UNICORE gateway for easy
firewall transversal, you need to configure an entry in the Gateway
connections config file, and set the container base URL property
(‘’container.baseurl’’) in the Auth server’s <cite>container.properties</cite>. This
option is also useful when the server’s listen address differs from
the publicly accessible server address, such as when running the Auth
server behind a NAT firewall.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="README-building.html" class="btn btn-neutral float-left" title="Building packages" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="CHANGES.html" class="btn btn-neutral float-right" title="Changelog" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, UNICORE.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>